# Telegram Channel Parser

Этот скрипт предназначен для парсинга сообщений из указанных Telegram каналов за определенный период времени.

## Особенности
- Получение сообщений из указанных Telegram каналов
- Фильтрация сообщений по времени публикации
- Сохранение результатов в JSON формате
- Учет московского часового пояса
- Пропуск пустых сообщений

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/cybercut1et/news_summarizer.git
cd news_summarizer/parser/tg_parser
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` в корневой директории проекта со следующими параметрами:
```
API_ID=ваш_api_id
API_HASH=ваш_api_hash
```
> Получить API_ID и API_HASH можно на сайте [my.telegram.org](https://my.telegram.org)

4. В первый раз необходимо будет указать номер телефона и код, который придет вам на ТГ.

5. Также советую закрыть все сессии, которые открыты не на телефоне, а в параметре device_model указать модель своего телефона
```
client = TelegramClient('tg_session', api_id, api_hash, system_version='4.16.30-vxhello', device_model='YOUR_DEVICE')
```

## Настройка

1. В файле `channels.json` укажите список каналов для парсинга:
```json
{
    "channels": ["Название канала 1", "Название канала 2"]
}
```

2. В файле `time_period.json` укажите период времени (в часах) для получения сообщений:
```json
{
    "hours": 24
}
```

## Использование

Запустите скрипт командой:
```bash
python parser_prototype.py
```

Результаты парсинга будут сохранены в файл `export.json` в следующем формате:
```json
[
    {
        "channel_name": "Название канала",
        "messages": [
            {
                "text": "Текст сообщения",
                "date": "Время публикации",
                "link": "https://t.me/channel/123"
            }
        ]
    }
]
```

## Структура проекта
- `parser_prototype.py` - основной скрипт парсера
- `channels.json` - список каналов для парсинга
- `time_period.json` - настройка периода времени
- `requirements.txt` - список зависимостей
- `.env` - конфигурация API (не включена в репозиторий)
- `export.json` - файл с результатами парсинга